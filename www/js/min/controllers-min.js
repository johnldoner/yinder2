angular.module("starter.controllers",["ionic","ionic.contrib.ui.cards","firebase"]).controller("DashCtrl",function(e){}).controller("ChatsCtrl",function(e,o){e.chats=o.all(),e.remove=function(e){o.remove(e)}}).controller("ChatDetailCtrl",function(e,o,a){e.chat=a.get(o.chatId)}).controller("ProfileCtrl",["$scope","$firebase",function(e,o){e.settings={enableFriends:!0},e.name=e.user&&e.user.facebook.displayName||"Not logged in",e.profilePic=e.user?"https://graph.facebook.com/"+e.user.facebook.id+"/picture?type=normal":"",e.launchVideo=function(){function a(a){var t=a[0],r=o.child("user_videos");r.child(e.name).set({video:t})}function t(){}var r={limit:1,duration:5};navigator.device.capture.captureVideo(a,t,r)}}]).controller("CardsCtrl",["$scope","$firebase","$ionicSwipeCardDelegate","Categories",function(e,o,a,t){var r=new Firebase("https://yinder.firebaseio.com/Categories");e.categories=t,e.cardTypes=o(r).$asArray(),e.cards=Array.prototype.slice.call(e.cardTypes,0,0),e.cards.forEach(function(e,o){e.Index=o+1}),e.cardSwiped=function(o){e.addCard()},e.cardDestroyed=function(o){e.cards.splice(o,1)},e.addCard=function(){var o=e.cardTypes[Math.floor(Math.random()*e.cardTypes.length)];o.id=Math.random(),e.cards.push(angular.extend({},o))}}]).controller("CardCtrl",function(e,o,a,t){e.goAway=function(r,i){var n=a.getSwipeableCard(e);n.swipe(),alert(t.$keyAt(parseInt(r)-1));var c="https://yinder.firebaseio.com/Categories/"+t.$keyAt(parseInt(r)-1),s=new Firebase(c+"/"+i),d=o(s);e.IdeaAttributes=d.$asArray(),e.IdeaAttributes.$add({userId:e.user.facebook.id,userName:e.user.facebook.displayName,timestamp:Date.now()})}}).controller("LoginCtrl",["$scope","$firebase","Auth",function(e,o,a){function t(e,o){e?console.log("Login failed!",e):(console.log("Authenticated successfully with payload: "+o),document.cookie="fb_id=$scope.user.facebook.id",document.cookie="fb_name=$scope.user.facebook.displayName",window.location.hash="/tab/dash")}e.auth=a,e.FacebookLogin=function(){e.auth.$authWithOAuthPopup("facebook",t)()},e.logout=function(){e.auth.$unauth(),window.setTimeout(function(){window.location.replace("/")},500)}}]);