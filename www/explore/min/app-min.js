var app=angular.module("app",["firebase"]);app.constant("FBURL","https://yinder.firebaseio.com/"),app.service("Ref",["FBURL",Firebase]),app.factory("Auth",["$firebaseAuth","Ref",function(e,r){return e(r)}]),app.factory("Categories",["$firebase","Ref",function(e,r){var a=r.child("Categories");return e(a).$asArray()}]),app.factory("LikedIdeas",["$firebase","Ref",function(e,r){return function(a){var t=new Firebase(r).child("users").child("like").child(a);return e(t).$asArray()}}]),app.controller("ctrl",["$scope","$firebase","Auth","Categories","LikedIdeas",function(e,r,a,t,i){e.categories=t,e.auth=a,e.FBURL="https://yinder.firebase.com/",$.urlParam=function(e,r){r||(r=window.location.href);var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(r);return a?a[1]||void 0:void 0};var s=$.urlParam("userid"),n=$.urlParam("name"),o=decodeURI(n);e.userID=s,e.displayName=o,e.LikeIdea=function(a,i,s){var n="https://yinder.firebaseio.com/Categories/"+t.$keyAt(s),o=new Firebase(n+"/"+a),u=r(o);e.IdeaAttributes=u.$asArray(),e.IdeaAttributes.$add({userId:e.userID,userName:e.displayName,timestamp:Date.now()});var d=new Firebase(n+"/likes");d.transaction(function(e){return e||(e={like:0,dislike:0}),e[a]++,e});var n="https://yinder.firebaseio.com/users/"+String(e.userID),o=new Firebase(n+"/"+likeVar),u=r(o);e.IdeaAttributes=u.$asArray(),e.IdeaAttributes.$add({ideaId:t.$keyAt(s),idea:i,timestamp:Date.now()})}}]),app.run(["$rootScope","Auth",function(e,r){e.user=r.$getAuth()}]);